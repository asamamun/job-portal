CREATE TABLE Users (
    UserID INT PRIMARY KEY AUTO_INCREMENT,
    Username VARCHAR(50) NOT NULL UNIQUE,
    PasswordHash VARCHAR(255) NOT NULL,
    Email VARCHAR(100) NOT NULL UNIQUE,
    FullName VARCHAR(100) NOT NULL,
    Role ENUM('Job Seeker', 'Employer', 'Admin') NOT NULL,
    ProfileCreationDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    LastLoginDate TIMESTAMP NULL
);

CREATE TABLE JobSeekers (
    UserID INT PRIMARY KEY,
    Resume VARCHAR(255),
    Skills TEXT,
    Experience TEXT,
    Education TEXT,
    PreferredJobTypes VARCHAR(255),
    Location VARCHAR(100),
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);

CREATE TABLE Employers (
    UserID INT PRIMARY KEY,
    CompanyName VARCHAR(100) NOT NULL,
    CompanyDescription TEXT,
    CompanyWebsite VARCHAR(100),
    ContactPerson VARCHAR(100),
    ContactEmail VARCHAR(100),
    ContactPhone VARCHAR(20),
    Industry VARCHAR(50),
    Location VARCHAR(100),
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);

CREATE TABLE Jobs (
    JobID INT PRIMARY KEY AUTO_INCREMENT,
    EmployerID INT NOT NULL,
    JobTitle VARCHAR(100) NOT NULL,
    JobDescription TEXT NOT NULL,
    JobType ENUM('Full-time', 'Part-time', 'Contract', 'Internship') NOT NULL,
    SalaryRange VARCHAR(50),
    Location VARCHAR(100),
    RequiredSkills TEXT,
    PostedDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ApplicationDeadline DATE,
    FOREIGN KEY (EmployerID) REFERENCES Employers(UserID)
);

CREATE TABLE Applications (
    ApplicationID INT PRIMARY KEY AUTO_INCREMENT,
    JobID INT NOT NULL,
    UserID INT NOT NULL,
    ApplicationDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Status ENUM('Applied', 'Under Review', 'Interview', 'Rejected', 'Accepted') DEFAULT 'Applied',
    FOREIGN KEY (JobID) REFERENCES Jobs(JobID),
    FOREIGN KEY (UserID) REFERENCES JobSeekers(UserID)
);

CREATE TABLE Messages (
    MessageID INT PRIMARY KEY AUTO_INCREMENT,
    SenderUserID INT NOT NULL,
    ReceiverUserID INT NOT NULL,
    JobID INT NULL,
    MessageContent TEXT NOT NULL,
    SentDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ReadStatus BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (SenderUserID) REFERENCES Users(UserID),
    FOREIGN KEY (ReceiverUserID) REFERENCES Users(UserID),
    FOREIGN KEY (JobID) REFERENCES Jobs(JobID)
);

CREATE TABLE SavedJobs (
    SaveID INT PRIMARY KEY AUTO_INCREMENT,
    UserID INT NOT NULL,
    JobID INT NOT NULL,
    SavedDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (UserID) REFERENCES JobSeekers(UserID),
    FOREIGN KEY (JobID) REFERENCES Jobs(JobID)
);

CREATE TABLE CompanyReviews (
    ReviewID INT PRIMARY KEY AUTO_INCREMENT,
    CompanyID INT NOT NULL,
    UserID INT NOT NULL,
    Rating TINYINT CHECK (Rating BETWEEN 1 AND 5),
    ReviewTitle VARCHAR(100),
    ReviewContent TEXT,
    ReviewDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (CompanyID) REFERENCES Employers(UserID),
    FOREIGN KEY (UserID) REFERENCES JobSeekers(UserID)
);
